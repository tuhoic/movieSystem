{"ast":null,"code":"import { ref } from 'vue';\nimport { getCommentList, deleteComment, updateComment } from '@/api/comment';\nexport default {\n  setup() {\n    const comments = ref([]);\n    const editingComment = ref(null);\n    const loadComments = async () => {\n      comments.value = await getCommentList();\n    };\n    const removeComment = async commentId => {\n      await deleteComment(commentId);\n      await loadComments();\n    };\n    const editComment = comment => {\n      editingComment.value = {\n        ...comment\n      };\n    };\n    const saveComment = async () => {\n      await updateComment(editingComment.value);\n      editingComment.value = null;\n      await loadComments();\n    };\n    loadComments();\n    return {\n      comments,\n      editingComment,\n      removeComment,\n      editComment,\n      saveComment\n    };\n  }\n};","map":{"version":3,"names":["ref","getCommentList","deleteComment","updateComment","setup","comments","editingComment","loadComments","value","removeComment","commentId","editComment","comment","saveComment"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\CommentList.vue"],"sourcesContent":["<template>\r\n  <div class=\"comment-list\">\r\n    <h2>评论列表</h2>\r\n    <div class=\"comment-item\" v-for=\"comment in comments\" :key=\"comment.id\">\r\n      <div class=\"comment-content\">\r\n        <h3>{{ comment.username }}</h3>\r\n        <p>{{ comment.content }}</p>\r\n      </div>\r\n      <div class=\"comment-actions\">\r\n        <button @click=\"removeComment(comment.id)\">删除</button>\r\n        <button @click=\"editComment(comment)\">编辑</button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"editingComment\">\r\n      <h3>编辑评论</h3>\r\n      <form @submit.prevent=\"saveComment\">\r\n        <div class=\"form-group\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" v-model=\"editingComment.username\" required>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label>评论内容</label>\r\n          <textarea v-model=\"editingComment.content\" required></textarea>\r\n        </div>\r\n        <button type=\"submit\">保存</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { getCommentList, deleteComment, updateComment } from '@/api/comment'\r\n\r\nexport default {\r\n  setup() {\r\n    const comments = ref([])\r\n    const editingComment = ref(null)\r\n\r\n    const loadComments = async () => {\r\n      comments.value = await getCommentList()\r\n    }\r\n\r\n    const removeComment = async (commentId) => {\r\n      await deleteComment(commentId)\r\n      await loadComments()\r\n    }\r\n\r\n    const editComment = (comment) => {\r\n      editingComment.value = { ...comment }\r\n    }\r\n\r\n    const saveComment = async () => {\r\n      await updateComment(editingComment.value)\r\n      editingComment.value = null\r\n      await loadComments()\r\n    }\r\n\r\n    loadComments()\r\n\r\n    return {\r\n      comments,\r\n      editingComment,\r\n      removeComment,\r\n      editComment,\r\n      saveComment\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AA+BA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,cAAc,EAAEC,aAAa,EAAEC,aAAY,QAAS,eAAc;AAE3E,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIL,GAAG,CAAC,EAAE;IACvB,MAAMM,cAAa,GAAIN,GAAG,CAAC,IAAI;IAE/B,MAAMO,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/BF,QAAQ,CAACG,KAAI,GAAI,MAAMP,cAAc,EAAC;IACxC;IAEA,MAAMQ,aAAY,GAAI,MAAOC,SAAS,IAAK;MACzC,MAAMR,aAAa,CAACQ,SAAS;MAC7B,MAAMH,YAAY,EAAC;IACrB;IAEA,MAAMI,WAAU,GAAKC,OAAO,IAAK;MAC/BN,cAAc,CAACE,KAAI,GAAI;QAAE,GAAGI;MAAQ;IACtC;IAEA,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9B,MAAMV,aAAa,CAACG,cAAc,CAACE,KAAK;MACxCF,cAAc,CAACE,KAAI,GAAI,IAAG;MAC1B,MAAMD,YAAY,EAAC;IACrB;IAEAA,YAAY,EAAC;IAEb,OAAO;MACLF,QAAQ;MACRC,cAAc;MACdG,aAAa;MACbE,WAAW;MACXE;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}