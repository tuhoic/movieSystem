{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { getOrderList, cancelOrder } from '@/api/order';\nexport default {\n  name: 'OrderList',\n  setup() {\n    const orders = ref([]);\n    const formatDate = dateStr => {\n      const date = new Date(dateStr);\n      return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\n    };\n    const fetchOrders = async () => {\n      orders.value = await getOrderList();\n    };\n    const abolishOrder = async order => {\n      if (confirm('确认取消订单吗？')) {\n        await cancelOrder(order.orderId);\n        await fetchOrders();\n      }\n    };\n    onMounted(fetchOrders);\n    return {\n      orders,\n      formatDate,\n      abolishOrder\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","getOrderList","cancelOrder","name","setup","orders","formatDate","dateStr","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","fetchOrders","value","abolishOrder","order","confirm","orderId"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\OrderList.vue"],"sourcesContent":["<template>\r\n  <div class=\"order-list\">\r\n    <h2>订单列表</h2>\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th>订单号</th>\r\n        <th>电影名称</th>\r\n        <th>电影票数</th>\r\n        <th>总金额</th>\r\n        <th>订单状态</th>\r\n        <th>下单时间</th>\r\n        <th>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"order in orders\" :key=\"order.orderId\">\r\n        <td>{{ order.orderId }}</td>\r\n        <td>{{ order.movieName }}</td>\r\n        <td>{{ order.ticketNumber }}</td>\r\n        <td>{{ order.totalPrice }}</td>\r\n        <td>{{ order.status }}</td>\r\n        <td>{{ formatDate(order.createTime) }}</td>\r\n        <td>\r\n          <button v-if=\"order.status === '待支付'\" @click=\"abolishOrder(order)\">取消订单</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { getOrderList, cancelOrder } from '@/api/order'\r\n\r\nexport default {\r\n  name: 'OrderList',\r\n  setup() {\r\n    const orders = ref([])\r\n\r\n    const formatDate = (dateStr) => {\r\n      const date = new Date(dateStr)\r\n      return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\r\n    }\r\n\r\n    const fetchOrders = async () => {\r\n      orders.value = await getOrderList()\r\n    }\r\n\r\n    const abolishOrder = async (order) => {\r\n      if (confirm('确认取消订单吗？')) {\r\n        await cancelOrder(order.orderId)\r\n        await fetchOrders()\r\n      }\r\n    }\r\n\r\n    onMounted(fetchOrders)\r\n\r\n    return {\r\n      orders,\r\n      formatDate,\r\n      abolishOrder,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.order-list {\r\n  margin-top: 40px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  text-align: center;\r\n}\r\n\r\nth {\r\n  font-weight: bold;\r\n  background-color: #eee;\r\n  padding: 8px;\r\n}\r\n\r\ntd {\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\nbutton {\r\n  background-color: #f44336;\r\n  color: #fff;\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #d32f2f;\r\n}\r\n</style>\r\n"],"mappings":"AAiCA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,SAASC,YAAY,EAAEC,WAAU,QAAS,aAAY;AAEtD,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIN,GAAG,CAAC,EAAE;IAErB,MAAMO,UAAS,GAAKC,OAAO,IAAK;MAC9B,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,OAAO;MAC7B,OAAQ,GAAEC,IAAI,CAACE,WAAW,EAAG,IAAGF,IAAI,CAACG,QAAQ,EAAC,GAAI,CAAE,IAAGH,IAAI,CAACI,OAAO,EAAE,IAAIJ,IAAI,CAACK,QAAQ,EAAG,IAAGL,IAAI,CAACM,UAAU,EAAG,IAAGN,IAAI,CAACO,UAAU,EAAG;IACrI;IAEA,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9BX,MAAM,CAACY,KAAI,GAAI,MAAMhB,YAAY,EAAC;IACpC;IAEA,MAAMiB,YAAW,GAAI,MAAOC,KAAK,IAAK;MACpC,IAAIC,OAAO,CAAC,UAAU,CAAC,EAAE;QACvB,MAAMlB,WAAW,CAACiB,KAAK,CAACE,OAAO;QAC/B,MAAML,WAAW,EAAC;MACpB;IACF;IAEAhB,SAAS,CAACgB,WAAW;IAErB,OAAO;MACLX,MAAM;MACNC,UAAU;MACVY;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}