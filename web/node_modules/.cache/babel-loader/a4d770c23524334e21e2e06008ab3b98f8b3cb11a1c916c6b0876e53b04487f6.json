{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-a2e819c6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"title\"\n}, \"All Comments\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"table is-fullwidth\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"User ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Movie ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Content\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Action\")])], -1 /* HOISTED */));\nconst _hoisted_4 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"table\", _hoisted_2, [_hoisted_3, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.comments, comment => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: comment.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(comment.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(comment.user_id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(comment.movie_id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(comment.content), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"button is-danger is-small\",\n      onClick: $event => $setup.removeComment(comment.id)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_4)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","comments","comment","key","id","_toDisplayString","user_id","movie_id","content","onClick","$event","removeComment","_hoisted_4"],"sources":["D:\\graduate\\project\\web\\src\\components\\CommentList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1 class=\"title\">All Comments</h1>\r\n    <table class=\"table is-fullwidth\">\r\n      <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>User ID</th>\r\n        <th>Movie ID</th>\r\n        <th>Content</th>\r\n        <th>Action</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"comment in comments\" :key=\"comment.id\">\r\n        <td>{{ comment.id }}</td>\r\n        <td>{{ comment.user_id }}</td>\r\n        <td>{{ comment.movie_id }}</td>\r\n        <td>{{ comment.content }}</td>\r\n        <td>\r\n          <button class=\"button is-danger is-small\" @click=\"removeComment(comment.id)\">Delete</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from 'vue'\r\nimport { getComments, deleteComment } from '@/api/comment'\r\n\r\nexport default {\r\n  name: 'CommentList',\r\n  setup() {\r\n    const state = reactive({\r\n      comments: []\r\n    })\r\n\r\n    const fetchData = async () => {\r\n      const res = await getComments()\r\n      if (res.data.code === 200) {\r\n        state.comments = res.data.data\r\n      }\r\n    }\r\n\r\n    const removeComment = async (id) => {\r\n      const res = await deleteComment(id)\r\n      if (res.data.code === 200) {\r\n        fetchData()\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n\r\n    return {\r\n      comments: state.comments,\r\n      removeComment\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.title {\r\n  margin-top: 2rem;\r\n  margin-bottom: 2rem;\r\n  text-align: center;\r\n}\r\n</style>\r\n"],"mappings":";;gEAEIA,mBAAA,CAAmC;EAA/BC,KAAK,EAAC;AAAO,GAAC,cAAY;;EACvBA,KAAK,EAAC;AAAoB;gEAC/BD,mBAAA,CAQQ,gB,aAPRA,mBAAA,CAMK,a,aALHA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAgB,YAAZ,SAAO,G,aACXA,mBAAA,CAAiB,YAAb,UAAQ,G,aACZA,mBAAA,CAAgB,YAAZ,SAAO,G,aACXA,mBAAA,CAAe,YAAX,QAAM,E;;;uBAThBE,mBAAA,CAwBM,cAvBJC,UAAmC,EACnCH,mBAAA,CAqBQ,SArBRI,UAqBQ,GApBNC,UAQQ,EACRL,mBAAA,CAUQ,iB,kBATRE,mBAAA,CAQKI,SAAA,QAAAC,WAAA,CARiBC,MAAA,CAAAC,QAAQ,EAAnBC,OAAO;yBAAlBR,mBAAA,CAQK;MAR4BS,GAAG,EAAED,OAAO,CAACE;QAC5CZ,mBAAA,CAAyB,YAAAa,gBAAA,CAAlBH,OAAO,CAACE,EAAE,kBACjBZ,mBAAA,CAA8B,YAAAa,gBAAA,CAAvBH,OAAO,CAACI,OAAO,kBACtBd,mBAAA,CAA+B,YAAAa,gBAAA,CAAxBH,OAAO,CAACK,QAAQ,kBACvBf,mBAAA,CAA8B,YAAAa,gBAAA,CAAvBH,OAAO,CAACM,OAAO,kBACtBhB,mBAAA,CAEK,aADHA,mBAAA,CAA4F;MAApFC,KAAK,EAAC,2BAA2B;MAAEgB,OAAK,EAAAC,MAAA,IAAEV,MAAA,CAAAW,aAAa,CAACT,OAAO,CAACE,EAAE;OAAG,QAAM,iBAAAQ,UAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}