{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"comment-list\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"评论列表\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"comment-content\"\n};\nconst _hoisted_4 = {\n  class: \"comment-actions\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"编辑评论\", -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", null, \"用户名\", -1 /* HOISTED */);\nconst _hoisted_11 = {\n  class: \"form-group\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", null, \"评论内容\", -1 /* HOISTED */);\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"保存\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.comments, comment => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"comment-item\",\n      key: comment.id\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, _toDisplayString(comment.username), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(comment.content), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.deleteComment(comment.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n      onClick: $event => $setup.editComment(comment)\n    }, \"编辑\", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.editingComment ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.saveComment && $setup.saveComment(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.editingComment.username = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.editingComment.username]])]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.editingComment.content = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.editingComment.content]])]), _hoisted_13], 32 /* HYDRATE_EVENTS */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","$setup","comments","comment","key","id","_hoisted_3","_toDisplayString","username","content","_hoisted_4","onClick","$event","deleteComment","_hoisted_5","editComment","_hoisted_6","editingComment","_hoisted_7","_hoisted_8","onSubmit","_cache","_withModifiers","args","saveComment","_hoisted_9","_hoisted_10","required","_hoisted_11","_hoisted_12","_hoisted_13"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\CommentList.vue"],"sourcesContent":["<template>\r\n  <div class=\"comment-list\">\r\n    <h2>评论列表</h2>\r\n    <div class=\"comment-item\" v-for=\"comment in comments\" :key=\"comment.id\">\r\n      <div class=\"comment-content\">\r\n        <h3>{{ comment.username }}</h3>\r\n        <p>{{ comment.content }}</p>\r\n      </div>\r\n      <div class=\"comment-actions\">\r\n        <button @click=\"deleteComment(comment.id)\">删除</button>\r\n        <button @click=\"editComment(comment)\">编辑</button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"editingComment\">\r\n      <h3>编辑评论</h3>\r\n      <form @submit.prevent=\"saveComment\">\r\n        <div class=\"form-group\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" v-model=\"editingComment.username\" required>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label>评论内容</label>\r\n          <textarea v-model=\"editingComment.content\" required></textarea>\r\n        </div>\r\n        <button type=\"submit\">保存</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { getComments, deleteComment, updateComment } from '@/api/comment'\r\n\r\nexport default {\r\n  setup() {\r\n    const comments = ref([])\r\n    const editingComment = ref(null)\r\n\r\n    const loadComments = async () => {\r\n      comments.value = await getComments()\r\n    }\r\n\r\n    const deleteComment = async (commentId) => {\r\n      await deleteComment(commentId)\r\n      await loadComments()\r\n    }\r\n\r\n    const editComment = (comment) => {\r\n      editingComment.value = { ...comment }\r\n    }\r\n\r\n    const saveComment = async () => {\r\n      await updateComment(editingComment.value)\r\n      editingComment.value = null\r\n      await loadComments()\r\n    }\r\n\r\n    loadComments()\r\n\r\n    return {\r\n      comments,\r\n      editingComment,\r\n      deleteComment,\r\n      editComment,\r\n      saveComment\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAc;gCACvBC,mBAAA,CAAa,YAAT,MAAI;;EAEDD,KAAK,EAAC;AAAiB;;EAIvBA,KAAK,EAAC;AAAiB;;;;;;gCAM5BC,mBAAA,CAAa,YAAT,MAAI;;EAEDD,KAAK,EAAC;AAAY;iCACrBC,mBAAA,CAAkB,eAAX,KAAG;;EAGPD,KAAK,EAAC;AAAY;iCACrBC,mBAAA,CAAmB,eAAZ,MAAI;iCAGbA,mBAAA,CAAiC;EAAzBC,IAAI,EAAC;AAAQ,GAAC,IAAE;;;uBAvB9BC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJC,UAAa,G,kBACbF,mBAAA,CASMG,SAAA,QAAAC,WAAA,CATsCC,MAAA,CAAAC,QAAQ,EAAnBC,OAAO;yBAAxCP,mBAAA,CASM;MATDH,KAAK,EAAC,cAAc;MAA8BW,GAAG,EAAED,OAAO,CAACE;QAClEX,mBAAA,CAGM,OAHNY,UAGM,GAFJZ,mBAAA,CAA+B,YAAAa,gBAAA,CAAxBJ,OAAO,CAACK,QAAQ,kBACvBd,mBAAA,CAA4B,WAAAa,gBAAA,CAAtBJ,OAAO,CAACM,OAAO,iB,GAEvBf,mBAAA,CAGM,OAHNgB,UAGM,GAFJhB,mBAAA,CAAsD;MAA7CiB,OAAK,EAAAC,MAAA,IAAEX,MAAA,CAAAY,aAAa,CAACV,OAAO,CAACE,EAAE;OAAG,IAAE,iBAAAS,UAAA,GAC7CpB,mBAAA,CAAiD;MAAxCiB,OAAK,EAAAC,MAAA,IAAEX,MAAA,CAAAc,WAAW,CAACZ,OAAO;OAAG,IAAE,iBAAAa,UAAA,E;kCAGjCf,MAAA,CAAAgB,cAAc,I,cAAzBrB,mBAAA,CAaM,OAAAsB,UAAA,GAZJC,UAAa,EACbzB,mBAAA,CAUO;IAVA0B,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUtB,MAAA,CAAAuB,WAAA,IAAAvB,MAAA,CAAAuB,WAAA,IAAAD,IAAA,CAAW;MAChC7B,mBAAA,CAGM,OAHN+B,UAGM,GAFJC,WAAkB,E,gBAClBhC,mBAAA,CAA8D;IAAvDC,IAAI,EAAC,MAAM;+DAAUM,MAAA,CAAAgB,cAAc,CAACT,QAAQ,GAAAI,MAAA;IAAEe,QAAQ,EAAR;iDAAzB1B,MAAA,CAAAgB,cAAc,CAACT,QAAQ,E,KAErDd,mBAAA,CAGM,OAHNkC,WAGM,GAFJC,WAAmB,E,gBACnBnC,mBAAA,CAA+D;+DAA5CO,MAAA,CAAAgB,cAAc,CAACR,OAAO,GAAAG,MAAA;IAAEe,QAAQ,EAAR;iDAAxB1B,MAAA,CAAAgB,cAAc,CAACR,OAAO,E,KAE3CqB,WAAiC,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}