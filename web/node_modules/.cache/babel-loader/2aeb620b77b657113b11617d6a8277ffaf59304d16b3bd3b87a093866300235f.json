{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-de0231e8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"order-list\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"订单列表\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"订单号\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"电影名称\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"电影票数\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"总金额\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"订单状态\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"下单时间\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */));\nconst _hoisted_4 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"table\", null, [_hoisted_3, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.orders, order => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: order.orderId\n    }, [_createElementVNode(\"td\", null, _toDisplayString(order.orderId), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.movieName), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.ticketNumber), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.totalPrice), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.status), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($setup.formatDate(order.createTime)), 1 /* TEXT */), _createElementVNode(\"td\", null, [order.status === '待支付' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $setup.abolishOrder(order)\n    }, \"取消订单\", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","orders","order","key","orderId","_toDisplayString","movieName","ticketNumber","totalPrice","status","formatDate","createTime","onClick","$event","abolishOrder","_hoisted_4"],"sources":["D:\\graduate\\project\\web\\src\\components\\OrderList.vue"],"sourcesContent":["<template>\r\n  <div class=\"order-list\">\r\n    <h2>订单列表</h2>\r\n    <table>\r\n      <thead>\r\n      <tr>\r\n        <th>订单号</th>\r\n        <th>电影名称</th>\r\n        <th>电影票数</th>\r\n        <th>总金额</th>\r\n        <th>订单状态</th>\r\n        <th>下单时间</th>\r\n        <th>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"order in orders\" :key=\"order.orderId\">\r\n        <td>{{ order.orderId }}</td>\r\n        <td>{{ order.movieName }}</td>\r\n        <td>{{ order.ticketNumber }}</td>\r\n        <td>{{ order.totalPrice }}</td>\r\n        <td>{{ order.status }}</td>\r\n        <td>{{ formatDate(order.createTime) }}</td>\r\n        <td>\r\n          <button v-if=\"order.status === '待支付'\" @click=\"abolishOrder(order)\">取消订单</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { getOrderList, cancelOrder } from '@/api/order'\r\n\r\nexport default {\r\n  name: 'OrderList',\r\n  setup() {\r\n    const orders = ref([])\r\n\r\n    const formatDate = (dateStr) => {\r\n      const date = new Date(dateStr)\r\n      return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\r\n    }\r\n\r\n    const fetchOrders = async () => {\r\n      orders.value = await getOrderList()\r\n    }\r\n\r\n    const abolishOrder = async (order) => {\r\n      if (confirm('确认取消订单吗？')) {\r\n        await cancelOrder(order.orderId)\r\n        await fetchOrders()\r\n      }\r\n    }\r\n\r\n    onMounted(fetchOrders)\r\n\r\n    return {\r\n      orders,\r\n      formatDate,\r\n      abolishOrder,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.order-list {\r\n  margin-top: 40px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  text-align: center;\r\n}\r\n\r\nth {\r\n  font-weight: bold;\r\n  background-color: #eee;\r\n  padding: 8px;\r\n}\r\n\r\ntd {\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\nbutton {\r\n  background-color: #f44336;\r\n  color: #fff;\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #d32f2f;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAa,YAAT,MAAI;gEAENA,mBAAA,CAUQ,gB,aATRA,mBAAA,CAQK,a,aAPHA,mBAAA,CAAY,YAAR,KAAG,G,aACPA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAY,YAAR,KAAG,G,aACPA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAW,YAAP,IAAE,E;;;uBAXZC,mBAAA,CA4BM,OA5BNC,UA4BM,GA3BJC,UAAa,EACbH,mBAAA,CAyBQ,gBAxBNI,UAUQ,EACRJ,mBAAA,CAYQ,iB,kBAXRC,mBAAA,CAUKI,SAAA,QAAAC,WAAA,CAVeC,MAAA,CAAAC,MAAM,EAAfC,KAAK;yBAAhBR,mBAAA,CAUK;MAVwBS,GAAG,EAAED,KAAK,CAACE;QACtCX,mBAAA,CAA4B,YAAAY,gBAAA,CAArBH,KAAK,CAACE,OAAO,kBACpBX,mBAAA,CAA8B,YAAAY,gBAAA,CAAvBH,KAAK,CAACI,SAAS,kBACtBb,mBAAA,CAAiC,YAAAY,gBAAA,CAA1BH,KAAK,CAACK,YAAY,kBACzBd,mBAAA,CAA+B,YAAAY,gBAAA,CAAxBH,KAAK,CAACM,UAAU,kBACvBf,mBAAA,CAA2B,YAAAY,gBAAA,CAApBH,KAAK,CAACO,MAAM,kBACnBhB,mBAAA,CAA2C,YAAAY,gBAAA,CAApCL,MAAA,CAAAU,UAAU,CAACR,KAAK,CAACS,UAAU,mBAClClB,mBAAA,CAEK,aADWS,KAAK,CAACO,MAAM,c,cAA1Bf,mBAAA,CAAgF;;MAAzCkB,OAAK,EAAAC,MAAA,IAAEb,MAAA,CAAAc,YAAY,CAACZ,KAAK;OAAG,MAAI,iBAAAa,UAAA,K"},"metadata":{},"sourceType":"module","externalDependencies":[]}