{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"用户登录\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"用户名\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"密码\", -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn-primary\"\n}, \"登录\")], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    class: \"login-form\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => _ctx.handleSubmit && _ctx.handleSubmit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    required: \"\",\n    autofocus: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username, void 0, {\n    trim: true\n  }]])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password, void 0, {\n    trim: true\n  }]])]), _hoisted_7], 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","_ctx","handleSubmit","_hoisted_3","_hoisted_4","id","name","$setup","username","$event","required","autofocus","_hoisted_5","_hoisted_6","password","_hoisted_7"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <h2>用户登录</h2>\r\n    <form class=\"login-form\" @submit.prevent=\"handleSubmit\">\r\n      <div class=\"form-group\">\r\n        <label for=\"username\">用户名</label>\r\n        <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            name=\"username\"\r\n            v-model.trim=\"username\"\r\n            required\r\n            autofocus\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">密码</label>\r\n        <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            v-model.trim=\"password\"\r\n            required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <button type=\"submit\" class=\"btn-primary\">登录</button>\r\n      </div>\r\n    </form>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { login } from '@/api/user'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n\r\n  setup() {\r\n    const username = ref('')\r\n    const password = ref('')\r\n    const router = useRouter()\r\n\r\n    const submitForm = async () => {\r\n      try {\r\n        const response = await login(username.value, password.value)\r\n        const { data } = response\r\n        localStorage.setItem('token', data.token)\r\n        await router.push('/')\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    }\r\n\r\n    return {\r\n      username,\r\n      password,\r\n      submitForm\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAO;gCAChBC,mBAAA,CAAa,YAAT,MAAI;;EAEDD,KAAK,EAAC;AAAY;gCACrBC,mBAAA,CAAiC;EAA1BC,GAAG,EAAC;AAAU,GAAC,KAAG;;EAUtBF,KAAK,EAAC;AAAY;gCACrBC,mBAAA,CAAgC;EAAzBC,GAAG,EAAC;AAAU,GAAC,IAAE;gCAS1BD,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAY,I,aACrBC,mBAAA,CAAqD;EAA7CE,IAAI,EAAC,QAAQ;EAACH,KAAK,EAAC;GAAc,IAAE,E;;;uBAzBlDI,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,UAAa,EACbL,mBAAA,CAyBO;IAzBDD,KAAK,EAAC,YAAY;IAAEO,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,IAAA,CAAAC,YAAA,IAAAD,IAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;MACpDT,mBAAA,CAUM,OAVNY,UAUM,GATJC,UAAiC,E,gBACjCb,mBAAA,CAOE;IANEE,IAAI,EAAC,MAAM;IACXY,EAAE,EAAC,UAAU;IACbC,IAAI,EAAC,UAAU;+DACDC,MAAA,CAAAC,QAAQ,GAAAC,MAAA;IACtBC,QAAQ,EAAR,EAAQ;IACRC,SAAS,EAAT;iDAFcJ,MAAA,CAAAC,QAAQ,E;UAAtB;EAAuB,E,MAK7BjB,mBAAA,CASM,OATNqB,UASM,GARJC,UAAgC,E,gBAChCtB,mBAAA,CAME;IALEE,IAAI,EAAC,UAAU;IACfY,EAAE,EAAC,UAAU;IACbC,IAAI,EAAC,UAAU;+DACDC,MAAA,CAAAO,QAAQ,GAAAL,MAAA;IACtBC,QAAQ,EAAR;iDADcH,MAAA,CAAAO,QAAQ,E;UAAtB;EAAuB,E,MAI7BC,UAEM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}