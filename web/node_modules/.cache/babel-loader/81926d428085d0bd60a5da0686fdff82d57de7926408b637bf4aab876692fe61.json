{"ast":null,"code":"import { reactive, onMounted } from 'vue';\nimport { getMovieList, deleteMovie } from '@/api/movie';\nexport default {\n  setup() {\n    const state = reactive({\n      movies: []\n    });\n    const loadMovies = async () => {\n      state.movies = await getMovieList();\n    };\n    const deleteMovieById = async id => {\n      await deleteMovie(id);\n      await loadMovies();\n    };\n    onMounted(() => {\n      loadMovies();\n    });\n    return {\n      movies: state.movies,\n      deleteMovie: deleteMovieById\n    };\n  }\n};","map":{"version":3,"names":["reactive","onMounted","getMovieList","deleteMovie","setup","state","movies","loadMovies","deleteMovieById","id"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\AdminMovie.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>电影管理</h1>\r\n    <div class=\"mb-2\">\r\n      <router-link to=\"/admin/movie/add\" class=\"btn btn-primary\">添加电影</router-link>\r\n    </div>\r\n    <table class=\"table table-striped\">\r\n      <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>名称</th>\r\n        <th>导演</th>\r\n        <th>主演</th>\r\n        <th>类型</th>\r\n        <th>上映时间</th>\r\n        <th>评分</th>\r\n        <th>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"(movie, index) in movies\" :key=\"index\">\r\n        <td>{{ movie.id }}</td>\r\n        <td>{{ movie.name }}</td>\r\n        <td>{{ movie.director }}</td>\r\n        <td>{{ movie.actor }}</td>\r\n        <td>{{ movie.category.name }}</td>\r\n        <td>{{ movie.releaseDate }}</td>\r\n        <td>{{ movie.rating }}</td>\r\n        <td>\r\n          <router-link :to=\"{ name: 'AdminEditMovie', params: { id: movie.id } }\" class=\"btn btn-primary btn-sm\">编辑</router-link>\r\n          <button class=\"btn btn-danger btn-sm\" @click=\"deleteMovie(movie.id)\">删除</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, onMounted } from 'vue'\r\nimport { getMovieList, deleteMovie } from '@/api/movie'\r\n\r\nexport default {\r\n  setup() {\r\n    const state = reactive({\r\n      movies: [],\r\n    })\r\n\r\n    const loadMovies = async () => {\r\n      state.movies = await getMovieList()\r\n    }\r\n\r\n    const deleteMovieById = async (id) => {\r\n      await deleteMovie(id)\r\n      await loadMovies()\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadMovies()\r\n    })\r\n\r\n    return {\r\n      movies: state.movies,\r\n      deleteMovie: deleteMovieById,\r\n    }\r\n  },\r\n}\r\n</script>\r\n"],"mappings":"AAuCA,SAASA,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AACxC,SAASC,YAAY,EAAEC,WAAU,QAAS,aAAY;AAEtD,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC;MACrBM,MAAM,EAAE;IACV,CAAC;IAED,MAAMC,UAAS,GAAI,MAAAA,CAAA,KAAY;MAC7BF,KAAK,CAACC,MAAK,GAAI,MAAMJ,YAAY,EAAC;IACpC;IAEA,MAAMM,eAAc,GAAI,MAAOC,EAAE,IAAK;MACpC,MAAMN,WAAW,CAACM,EAAE;MACpB,MAAMF,UAAU,EAAC;IACnB;IAEAN,SAAS,CAAC,MAAM;MACdM,UAAU,EAAC;IACb,CAAC;IAED,OAAO;MACLD,MAAM,EAAED,KAAK,CAACC,MAAM;MACpBH,WAAW,EAAEK;IACf;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}