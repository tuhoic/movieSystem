{"ast":null,"code":"import { reactive } from 'vue';\nimport { login } from '@/api/user';\nexport default {\n  name: 'LoginPage',\n  methods: {\n    login\n  },\n  setup() {\n    const state = reactive({\n      username: '',\n      password: '',\n      error: ''\n    });\n    const handleResponse = response => {\n      if (response.status === 200) {\n        // 保存token到本地存储\n        localStorage.setItem('token', response.data.token);\n        // 重定向到首页\n        location.href = '/';\n      } else {\n        state.error = response.data.message;\n      }\n    };\n    const enter = () => {\n      login(state.username, state.password).then(handleResponse).catch(error => {\n        state.error = error.message;\n      });\n    };\n    return {\n      username: state.username,\n      password: state.password,\n      error: state.error,\n      enter\n    };\n  }\n};","map":{"version":3,"names":["reactive","login","name","methods","setup","state","username","password","error","handleResponse","response","status","localStorage","setItem","data","token","location","href","message","enter","then","catch"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <h2>用户登录</h2>\r\n    <form @submit.prevent=\"login\">\r\n      <table class=\"table-form\">\r\n        <input type=\"hidden\" name=\"action\" value=\"enter\">\r\n        <input type=\"hidden\" name=\"ftaa\" value=\"\">\r\n        <input type=\"hidden\" name=\"bfaa\" value=\"\">\r\n        <tbody><tr>\r\n          <td class=\"field-name\"><label for=\"handleOrEmail\">用户名</label></td>\r\n          <td><input id=\"handleOrEmail\" style=\"width: 15em;\" name=\"handleOrEmail\" value=\"\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"field-name\"><label for=\"password\">密码</label></td>\r\n          <td><input id=\"password\" style=\"width: 15em;\" name=\"password\" type=\"password\" value=\"\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td>&nbsp;</td>\r\n          <td valign=\"middle\">\r\n            <label style=\"font-size:1.1rem;\" for=\"remember\">\r\n              <input id=\"remember\" style=\"position:relative;top:0.25em;\" type=\"checkbox\" name=\"remember\">\r\n              Remember me for a month\r\n            </label>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"2\">\r\n            <div style=\"text-align: center;\"><input class=\"submit\" type=\"submit\" value=\"Login\">\r\n            </div>\r\n            <div style=\"text-align:right;font-size:1.1rem;\">\r\n              <a href=\"/passwordRecovery\">Forgot your password?</a>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        </tbody></table>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from 'vue'\r\nimport { login } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n  methods: {login},\r\n\r\n  setup() {\r\n    const state = reactive({\r\n      username: '',\r\n      password: '',\r\n      error: ''\r\n    })\r\n\r\n    const handleResponse = (response) => {\r\n      if (response.status === 200) {\r\n        // 保存token到本地存储\r\n        localStorage.setItem('token', response.data.token)\r\n        // 重定向到首页\r\n        location.href = '/'\r\n      } else {\r\n        state.error = response.data.message\r\n      }\r\n    }\r\n\r\n    const enter = () => {\r\n      login(state.username, state.password)\r\n          .then(handleResponse)\r\n          .catch(error => {\r\n            state.error = error.message\r\n          })\r\n    }\r\n\r\n    return {\r\n      username: state.username,\r\n      password: state.password,\r\n      error: state.error,\r\n      enter\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n  margin-top: 32px;\r\n}\r\n\r\nlabel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 1.2rem;\r\n}\r\n\r\ninput[type=\"email\"],\r\ninput[type=\"password\"] {\r\n  padding: 8px;\r\n  font-size: 1rem;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  width: 300px;\r\n  max-width: 100%;\r\n}\r\n\r\nbutton[type=\"submit\"] {\r\n  padding: 8px 16px;\r\n  background-color: #007bff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\nbutton[type=\"submit\"]:hover {\r\n  background-color: #0069d9;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  font-size: 1.2rem;\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n"],"mappings":"AAwCA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,KAAI,QAAS,YAAW;AAEjC,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,OAAO,EAAE;IAACF;EAAK,CAAC;EAEhBG,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC;MACrBM,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACT,CAAC;IAED,MAAMC,cAAa,GAAKC,QAAQ,IAAK;MACnC,IAAIA,QAAQ,CAACC,MAAK,KAAM,GAAG,EAAE;QAC3B;QACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACI,IAAI,CAACC,KAAK;QACjD;QACAC,QAAQ,CAACC,IAAG,GAAI,GAAE;MACpB,OAAO;QACLZ,KAAK,CAACG,KAAI,GAAIE,QAAQ,CAACI,IAAI,CAACI,OAAM;MACpC;IACF;IAEA,MAAMC,KAAI,GAAIA,CAAA,KAAM;MAClBlB,KAAK,CAACI,KAAK,CAACC,QAAQ,EAAED,KAAK,CAACE,QAAQ,EAC/Ba,IAAI,CAACX,cAAc,EACnBY,KAAK,CAACb,KAAI,IAAK;QACdH,KAAK,CAACG,KAAI,GAAIA,KAAK,CAACU,OAAM;MAC5B,CAAC;IACP;IAEA,OAAO;MACLZ,QAAQ,EAAED,KAAK,CAACC,QAAQ;MACxBC,QAAQ,EAAEF,KAAK,CAACE,QAAQ;MACxBC,KAAK,EAAEH,KAAK,CAACG,KAAK;MAClBW;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}