{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5faf54d0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"用户登录\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"table\", {\n  class: \"table-form\"\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"hidden\",\n  name: \"action\",\n  value: \"enter\"\n}), /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"hidden\",\n  name: \"ftaa\",\n  value: \"\"\n}), /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"hidden\",\n  name: \"bfaa\",\n  value: \"\"\n}), /*#__PURE__*/_createElementVNode(\"tbody\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"field-name\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"handleOrEmail\"\n}, \"用户名\")]), /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"input\", {\n  id: \"handleOrEmail\",\n  style: {\n    \"width\": \"15em\"\n  },\n  name: \"handleOrEmail\",\n  value: \"\"\n})])]), /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"field-name\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"密码\")]), /*#__PURE__*/_createElementVNode(\"td\", null, [/*#__PURE__*/_createElementVNode(\"input\", {\n  id: \"password\",\n  style: {\n    \"width\": \"15em\"\n  },\n  name: \"password\",\n  type: \"password\",\n  value: \"\"\n})])]), /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", null, \" \"), /*#__PURE__*/_createElementVNode(\"td\", {\n  valign: \"middle\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", {\n  style: {\n    \"font-size\": \"1.1rem\"\n  },\n  for: \"remember\"\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  id: \"remember\",\n  style: {\n    \"position\": \"relative\",\n    \"top\": \"0.25em\"\n  },\n  type: \"checkbox\",\n  name: \"remember\"\n}), /*#__PURE__*/_createTextVNode(\" Remember me for a month \")])])]), /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", {\n  colspan: \"2\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"text-align\": \"center\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  class: \"submit\",\n  type: \"submit\",\n  value: \"Login\"\n})]), /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"text-align\": \"right\",\n    \"font-size\": \"1.1rem\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"/passwordRecovery\"\n}, \"Forgot your password?\")])])])])], -1 /* HOISTED */));\nconst _hoisted_4 = [_hoisted_3];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"]))\n  }, _hoisted_4, 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","name","value","for","id","style","valign","colspan","href","_hoisted_3","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","login"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <h2>用户登录</h2>\r\n    <form @submit.prevent=\"login\">\r\n      <table class=\"table-form\">\r\n        <input type=\"hidden\" name=\"action\" value=\"enter\">\r\n        <input type=\"hidden\" name=\"ftaa\" value=\"\">\r\n        <input type=\"hidden\" name=\"bfaa\" value=\"\">\r\n        <tbody><tr>\r\n          <td class=\"field-name\"><label for=\"handleOrEmail\">用户名</label></td>\r\n          <td><input id=\"handleOrEmail\" style=\"width: 15em;\" name=\"handleOrEmail\" value=\"\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"field-name\"><label for=\"password\">密码</label></td>\r\n          <td><input id=\"password\" style=\"width: 15em;\" name=\"password\" type=\"password\" value=\"\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td>&nbsp;</td>\r\n          <td valign=\"middle\">\r\n            <label style=\"font-size:1.1rem;\" for=\"remember\">\r\n              <input id=\"remember\" style=\"position:relative;top:0.25em;\" type=\"checkbox\" name=\"remember\">\r\n              Remember me for a month\r\n            </label>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"2\">\r\n            <div style=\"text-align: center;\"><input class=\"submit\" type=\"submit\" value=\"Login\">\r\n            </div>\r\n            <div style=\"text-align:right;font-size:1.1rem;\">\r\n              <a href=\"/passwordRecovery\">Forgot your password?</a>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        </tbody></table>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from 'vue'\r\nimport { login } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n  methods: {login},\r\n\r\n  setup() {\r\n    const state = reactive({\r\n      username: '',\r\n      password: '',\r\n      error: ''\r\n    })\r\n\r\n    const handleResponse = (response) => {\r\n      if (response.status === 200) {\r\n        // 保存token到本地存储\r\n        localStorage.setItem('token', response.data.token)\r\n        // 重定向到首页\r\n        location.href = '/'\r\n      } else {\r\n        state.error = response.data.message\r\n      }\r\n    }\r\n\r\n    const enter = () => {\r\n      login(state.username, state.password)\r\n          .then(handleResponse)\r\n          .catch(error => {\r\n            state.error = error.message\r\n          })\r\n    }\r\n\r\n    return {\r\n      username: state.username,\r\n      password: state.password,\r\n      error: state.error,\r\n      enter\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n}\r\n\r\nform {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n  margin-top: 32px;\r\n}\r\n\r\nlabel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 1.2rem;\r\n}\r\n\r\ninput[type=\"email\"],\r\ninput[type=\"password\"] {\r\n  padding: 8px;\r\n  font-size: 1rem;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  width: 300px;\r\n  max-width: 100%;\r\n}\r\n\r\nbutton[type=\"submit\"] {\r\n  padding: 8px 16px;\r\n  background-color: #007bff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\nbutton[type=\"submit\"]:hover {\r\n  background-color: #0069d9;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  font-size: 1.2rem;\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAiB;gEAC1BC,mBAAA,CAAa,YAAT,MAAI;gEAENA,mBAAA,CA8BkB;EA9BXD,KAAK,EAAC;AAAY,I,aACvBC,mBAAA,CAAiD;EAA1CC,IAAI,EAAC,QAAQ;EAACC,IAAI,EAAC,QAAQ;EAACC,KAAK,EAAC;iBACzCH,mBAAA,CAA0C;EAAnCC,IAAI,EAAC,QAAQ;EAACC,IAAI,EAAC,MAAM;EAACC,KAAK,EAAC;iBACvCH,mBAAA,CAA0C;EAAnCC,IAAI,EAAC,QAAQ;EAACC,IAAI,EAAC,MAAM;EAACC,KAAK,EAAC;iBACvCH,mBAAA,CA0BQ,gB,aA1BDA,mBAAA,CAGF,a,aAFHA,mBAAA,CAAkE;EAA9DD,KAAK,EAAC;AAAY,I,aAACC,mBAAA,CAAsC;EAA/BI,GAAG,EAAC;AAAe,GAAC,KAAG,E,gBACrDJ,mBAAA,CAAsF,a,aAAlFA,mBAAA,CAA6E;EAAtEK,EAAE,EAAC,eAAe;EAACC,KAAoB,EAApB;IAAA;EAAA,CAAoB;EAACJ,IAAI,EAAC,eAAe;EAACC,KAAK,EAAC;qBAEhFH,mBAAA,CAGK,a,aAFHA,mBAAA,CAA4D;EAAxDD,KAAK,EAAC;AAAY,I,aAACC,mBAAA,CAAgC;EAAzBI,GAAG,EAAC;AAAU,GAAC,IAAE,E,gBAC/CJ,mBAAA,CAA4F,a,aAAxFA,mBAAA,CAAmF;EAA5EK,EAAE,EAAC,UAAU;EAACC,KAAoB,EAApB;IAAA;EAAA,CAAoB;EAACJ,IAAI,EAAC,UAAU;EAACD,IAAI,EAAC,UAAU;EAACE,KAAK,EAAC;qBAEtFH,mBAAA,CAQK,a,aAPHA,mBAAA,CAAe,YAAX,GAAM,G,aACVA,mBAAA,CAKK;EALDO,MAAM,EAAC;AAAQ,I,aACjBP,mBAAA,CAGQ;EAHDM,KAAyB,EAAzB;IAAA;EAAA,CAAyB;EAACF,GAAG,EAAC;iBACnCJ,mBAAA,CAA2F;EAApFK,EAAE,EAAC,UAAU;EAACC,KAAqC,EAArC;IAAA;IAAA;EAAA,CAAqC;EAACL,IAAI,EAAC,UAAU;EAACC,IAAI,EAAC;kCAAW,2BAE7F,E,oBAGJF,mBAAA,CAQK,a,aAPHA,mBAAA,CAMK;EANDQ,OAAO,EAAC;AAAG,I,aACbR,mBAAA,CACM;EADDM,KAA2B,EAA3B;IAAA;EAAA;AAA2B,I,aAACN,mBAAA,CAAkD;EAA3CD,KAAK,EAAC,QAAQ;EAACE,IAAI,EAAC,QAAQ;EAACE,KAAK,EAAC;mBAE3EH,mBAAA,CAEM;EAFDM,KAA0C,EAA1C;IAAA;IAAA;EAAA;AAA0C,I,aAC7CN,mBAAA,CAAqD;EAAlDS,IAAI,EAAC;AAAmB,GAAC,uBAAqB,E;oBA1BzDC,UA8BkB,C;;uBAjCtBC,mBAAA,CAmCM,OAnCNC,UAmCM,GAlCJC,UAAa,EACbb,mBAAA,CAgCO;IAhCAc,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}