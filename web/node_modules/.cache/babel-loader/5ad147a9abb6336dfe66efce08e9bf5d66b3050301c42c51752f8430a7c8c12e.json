{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"电影管理\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"mb-2\"\n};\nconst _hoisted_3 = {\n  class: \"table table-striped\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"名称\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"导演\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"主演\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"类型\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"上映时间\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"评分\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */);\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n    to: \"/admin/movie/add\",\n    class: \"btn btn-primary\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"添加电影\")]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"table\", _hoisted_3, [_hoisted_4, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.movies, (movie, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(movie.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.director), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.actor), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.category.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.releaseDate), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(movie.rating), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createVNode(_component_router_link, {\n      to: {\n        name: 'AdminEditMovie',\n        params: {\n          id: movie.id\n        }\n      },\n      class: \"btn btn-primary btn-sm\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"编辑\")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"button\", {\n      class: \"btn btn-danger btn-sm\",\n      onClick: $event => $setup.removeMovie(movie.id)\n    }, \"删除\", 8 /* PROPS */, _hoisted_5)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","_hoisted_3","_hoisted_4","_Fragment","_renderList","$setup","movies","movie","index","key","_toDisplayString","id","name","director","actor","category","releaseDate","rating","params","onClick","$event","removeMovie","_hoisted_5"],"sources":["D:\\graduate\\school\\project\\web\\src\\components\\AdminMovie.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>电影管理</h1>\r\n    <div class=\"mb-2\">\r\n      <router-link to=\"/admin/movie/add\" class=\"btn btn-primary\">添加电影</router-link>\r\n    </div>\r\n    <table class=\"table table-striped\">\r\n      <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>名称</th>\r\n        <th>导演</th>\r\n        <th>主演</th>\r\n        <th>类型</th>\r\n        <th>上映时间</th>\r\n        <th>评分</th>\r\n        <th>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"(movie, index) in movies\" :key=\"index\">\r\n        <td>{{ movie.id }}</td>\r\n        <td>{{ movie.name }}</td>\r\n        <td>{{ movie.director }}</td>\r\n        <td>{{ movie.actor }}</td>\r\n        <td>{{ movie.category.name }}</td>\r\n        <td>{{ movie.releaseDate }}</td>\r\n        <td>{{ movie.rating }}</td>\r\n        <td>\r\n          <router-link :to=\"{ name: 'AdminEditMovie', params: { id: movie.id } }\" class=\"btn btn-primary btn-sm\">编辑</router-link>\r\n          <button class=\"btn btn-danger btn-sm\" @click=\"removeMovie(movie.id)\">删除</button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, onMounted } from 'vue'\r\nimport { getMovieList, deleteMovie } from '@/api/movie'\r\n\r\nexport default {\r\n  setup() {\r\n    const state = reactive({\r\n      movies: [],\r\n    })\r\n\r\n    const loadMovies = async () => {\r\n      state.movies = await getMovieList()\r\n    }\r\n\r\n    const removeMovieById = async (id) => {\r\n      await deleteMovie(id)\r\n      await loadMovies()\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadMovies()\r\n    })\r\n\r\n    return {\r\n      movies: state.movies,\r\n      removeMovie: removeMovieById,\r\n    }\r\n  },\r\n}\r\n</script>\r\n"],"mappings":";gCAEIA,mBAAA,CAAa,YAAT,MAAI;;EACHC,KAAK,EAAC;AAAM;;EAGVA,KAAK,EAAC;AAAqB;gCAChCD,mBAAA,CAWQ,gB,aAVRA,mBAAA,CASK,a,aARHA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAa,YAAT,MAAI,G,aACRA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAW,YAAP,IAAE,E;;;;uBAfZE,mBAAA,CAkCM,cAjCJC,UAAa,EACbH,mBAAA,CAEM,OAFNI,UAEM,GADJC,YAAA,CAA6EC,sBAAA;IAAhEC,EAAE,EAAC,kBAAkB;IAACN,KAAK,EAAC;;sBAAkB,MAAI,C,iBAAJ,MAAI,E;;QAEjED,mBAAA,CA4BQ,SA5BRQ,UA4BQ,GA3BNC,UAWQ,EACRT,mBAAA,CAcQ,iB,kBAbRE,mBAAA,CAYKQ,SAAA,QAAAC,WAAA,CAZwBC,MAAA,CAAAC,MAAM,GAAvBC,KAAK,EAAEC,KAAK;yBAAxBb,mBAAA,CAYK;MAZiCc,GAAG,EAAED;IAAK,IAC9Cf,mBAAA,CAAuB,YAAAiB,gBAAA,CAAhBH,KAAK,CAACI,EAAE,kBACflB,mBAAA,CAAyB,YAAAiB,gBAAA,CAAlBH,KAAK,CAACK,IAAI,kBACjBnB,mBAAA,CAA6B,YAAAiB,gBAAA,CAAtBH,KAAK,CAACM,QAAQ,kBACrBpB,mBAAA,CAA0B,YAAAiB,gBAAA,CAAnBH,KAAK,CAACO,KAAK,kBAClBrB,mBAAA,CAAkC,YAAAiB,gBAAA,CAA3BH,KAAK,CAACQ,QAAQ,CAACH,IAAI,kBAC1BnB,mBAAA,CAAgC,YAAAiB,gBAAA,CAAzBH,KAAK,CAACS,WAAW,kBACxBvB,mBAAA,CAA2B,YAAAiB,gBAAA,CAApBH,KAAK,CAACU,MAAM,kBACnBxB,mBAAA,CAGK,aAFHK,YAAA,CAAuHC,sBAAA;MAAzGC,EAAE;QAAAY,IAAA;QAAAM,MAAA;UAAAP,EAAA,EAA0CJ,KAAK,CAACI;QAAE;MAAA;MAAMjB,KAAK,EAAC;;wBAAyB,MAAE,C,iBAAF,IAAE,E;;iDACzGD,mBAAA,CAAgF;MAAxEC,KAAK,EAAC,uBAAuB;MAAEyB,OAAK,EAAAC,MAAA,IAAEf,MAAA,CAAAgB,WAAW,CAACd,KAAK,CAACI,EAAE;OAAG,IAAE,iBAAAW,UAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}